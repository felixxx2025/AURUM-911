(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{590:function(t,e,r){"use strict";r.d(e,{zx:function(){return i}});var s=r(7573),n=r(607);r(9585);let i=function(t){let{className:e,variant:r="primary",size:i="md",loading:o,children:a,disabled:l,...u}=t;return(0,s.jsxs)("button",{className:(0,n.W)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-600":"primary"===r||"default"===r,"bg-gray-200 text-gray-900 hover:bg-gray-300 focus-visible:ring-gray-500 border border-gray-300":"secondary"===r||"outline"===r,"hover:bg-gray-100 focus-visible:ring-gray-500":"ghost"===r,"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-600":"danger"===r||"destructive"===r,"h-8 px-3 text-sm":"sm"===i,"h-10 px-4 text-sm":"md"===i,"h-12 px-6 text-base":"lg"===i},e),disabled:l||o,...u,children:[o&&(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})}},8962:function(t,e,r){"use strict";r.d(e,{II:function(){return i}});var s=r(7573),n=r(607);r(9585);let i=function(t){let{className:e,label:r,error:i,helperText:o,id:a,...l}=t,u=a||"input-".concat(Math.random().toString(36).substr(2,9));return(0,s.jsxs)("div",{className:"space-y-1",children:[r&&(0,s.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700",children:r}),(0,s.jsx)("input",{id:u,className:(0,n.W)("block w-full rounded-md border-0 py-1.5 px-3 text-gray-900 shadow-sm ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",i?"ring-red-300 focus:ring-red-600":"ring-gray-300 focus:ring-blue-600",e),...l}),i&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:i}),o&&!i&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:o})]})}},4012:function(t,e,r){"use strict";r.d(e,{apiClient:function(){return i}});let s=r(8571).env.NEXT_PUBLIC_API_URL||"http://localhost:3000";class n{getSubdomain(){let t=window.location.hostname.split(".");return t.length>2?t[0]:null}setTenant(t){this.tenantId=t||null}setToken(t){this.token=t||null}uuid(){try{var t;let e=globalThis;if(null==e?void 0:null===(t=e.crypto)||void 0===t?void 0:t.randomUUID)return e.crypto.randomUUID()}catch(t){}return"id-"+Math.random().toString(16).slice(2)+Date.now().toString(16)}getHeaders(t){let e=this.uuid();this.lastCorrelationId=e;let r={"X-Correlation-Id":e};this.token&&(r.Authorization="Bearer ".concat(this.token));let s=this.getSubdomain();return s&&(r["x-subdomain"]=s),t&&(r["Idempotency-Key"]=t),r}isAbsoluteUrl(t){return/^https?:\/\//i.test(t)}buildUrl(t){return this.isAbsoluteUrl(t)?t:"".concat(this.baseURL).concat(t)}async sleep(t){return new Promise(e=>setTimeout(e,t))}async doFetch(t,e,s){var n,i,o;let a;let{pushLog:l}=await r.e(565).then(r.bind(r,7565)),u=null!==(n=null==s?void 0:s.timeoutMs)&&void 0!==n?n:1e4,h=Math.max(0,null!==(i=null==s?void 0:s.retries)&&void 0!==i?i:1),c=null!==(o=null==s?void 0:s.retryOnStatuses)&&void 0!==o?o:[429,502,503,504],d={...this.getHeaders(null==s?void 0:s.idempotencyKey),...e.headers},f=e.body;null==f||"string"!=typeof f||d["Content-Type"]||(d["Content-Type"]="application/json");for(let r=0;r<=h;r++){let s=new AbortController,n=setTimeout(()=>s.abort(),u),i=Date.now();try{let o=await fetch(t,{...e,headers:d,signal:s.signal});clearTimeout(n);let a=Date.now()-i;if(l("info","HTTP "+(e.method||"GET")+" "+t,{status:o.status,ms:a,correlationId:this.lastCorrelationId}),!o.ok){if(r<h&&c.includes(o.status)){let t=o.headers.get("retry-after"),e=Math.min(300*2**r,2e3);if(t){let r=Number(t);isNaN(r)||(e=Math.min(1e3*r,5e3))}await this.sleep(e+Math.floor(200*Math.random()));continue}let e="API Error: ".concat(o.status," ").concat(o.statusText);try{let t=await o.json();(null==t?void 0:t.message)&&(e=t.message)}catch(t){}throw l("warn",e,{status:o.status,url:t,ms:a,correlationId:this.lastCorrelationId}),Error(e)}return o}catch(c){clearTimeout(n);let s=Date.now()-i;l("error","HTTP error "+(e.method||"GET")+" "+t,{error:String((null==c?void 0:c.message)||c),ms:s,correlationId:this.lastCorrelationId}),a=c;let o=(null==c?void 0:c.name)==="AbortError",u=c instanceof TypeError||/Network error/i.test(String((null==c?void 0:c.message)||""));if(r<h&&(o||u)){await this.sleep(Math.min(300*2**r,1500));continue}throw c}}throw null!=a?a:Error("Unknown network error")}async request(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;try{let s=this.buildUrl(t),n=await this.doFetch(s,e,r),i=n.headers.get("content-type");if(i&&i.includes("application/json"))return n.json();return n.text()}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error("Network error: Unable to connect to server");throw t}}async requestRaw(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=this.buildUrl(t),n=await this.doFetch(s,e,r),i=n.headers.get("content-type");return{data:i&&i.includes("application/json")?await n.json():await n.text(),response:n}}async get(t){return this.request(t,{method:"GET"})}async post(t,e){let r="idem-"+Math.random().toString(36).slice(2);return this.request(t,{method:"POST",body:void 0!==e?JSON.stringify(e):void 0},{idempotencyKey:r})}async login(t){if(!t.email||!t.password)throw Error("Email and password are required");return this.request("/api/v1/auth/login",{method:"POST",body:JSON.stringify(t),credentials:"include"})}async logout(t){return this.request("/api/v1/auth/logout",{method:"POST",body:JSON.stringify({refreshToken:t})})}async refreshToken(t){return this.request("/api/v1/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:t})})}async enableMFA(){return this.request("/api/v1/auth/mfa/enable",{method:"POST"})}async verifyMFA(t){return this.request("/api/v1/auth/mfa/verify",{method:"POST",body:JSON.stringify({code:t})})}async disableMFA(t){return this.request("/api/v1/auth/mfa/disable",{method:"POST",body:JSON.stringify({password:t})})}async getTenantInfo(){return this.request("/api/v1/tenant/lookup")}async getPeople(t){let e=new URLSearchParams;return(null==t?void 0:t.page)&&e.set("page",t.page.toString()),(null==t?void 0:t.pageSize)&&e.set("pageSize",t.pageSize.toString()),(null==t?void 0:t.filter)&&e.set("filter",t.filter),this.request("/api/v1/hr/people?".concat(e))}async getPerson(t){return this.request("/api/v1/hr/people/".concat(t))}async createPerson(t){return this.request("/api/v1/hr/people",{method:"POST",body:JSON.stringify(t)})}async updatePerson(t,e){return this.request("/api/v1/hr/people/".concat(t),{method:"PUT",body:JSON.stringify(e)})}async runPayroll(t){return this.request("/api/v1/hr/payroll/run",{method:"POST",body:JSON.stringify(t)})}async punchTime(t){return this.request("/api/v1/hr/time/punch",{method:"POST",body:JSON.stringify(t)})}async listPartners(){return this.get("/api/v1/partners")}async createPartner(t){return this.request("/api/v1/partners",{method:"POST",body:JSON.stringify(t)})}async rotatePartnerCredentials(t){return this.request("/api/v1/partners/".concat(t,"/rotate-credentials"),{method:"POST"})}async listWebhooks(t){return this.get("/api/v1/partners/".concat(t,"/webhooks"))}async createWebhook(t,e){return this.request("/api/v1/partners/".concat(t,"/webhooks"),{method:"POST",body:JSON.stringify(e)})}async listPartnerLogs(t){return this.get("/api/v1/partners/".concat(t,"/logs"))}async replayDelivery(t,e){return this.request("/api/v1/partners/".concat(t,"/webhooks/").concat(e,"/replay"),{method:"POST"})}async listPartnerLogsPaged(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;e.status&&r.set("status",e.status),e.q&&r.set("q",e.q),e.from&&r.set("from",e.from),e.to&&r.set("to",e.to),null!=e.limit&&r.set("limit",String(e.limit)),null!=e.offset&&r.set("offset",String(e.offset)),e.sort&&r.set("sort",e.sort);let{data:s,response:n}=await this.requestRaw("/api/v1/partners/".concat(t,"/logs?").concat(r.toString()));return{items:s,total:parseInt(n.headers.get("X-Total-Count")||"0",10),limit:parseInt(n.headers.get("X-Result-Limit")||String(e.limit||0),10)||e.limit||0,offset:parseInt(n.headers.get("X-Result-Offset")||String(e.offset||0),10)||e.offset||0}}async sandboxDatasets(){return this.get("/sandbox/datasets")}async sandboxEmitEvent(t,e){return this.request("/sandbox/events/".concat(encodeURIComponent(t)),{method:"POST",body:e?JSON.stringify(e):void 0})}async getWebhookCatalog(){return this.get("/webhooks/catalog")}constructor(t){this.tenantId=null,this.token=null,this.lastCorrelationId=null,this.baseURL=t}}let i=new n(s)},298:function(t,e,r){"use strict";r.d(e,{E:function(){return i}});var s=r(4012);class n{subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(e=>e!==t)}}notify(){this.listeners.forEach(t=>t(this.state))}loadFromStorage(){try{let t=localStorage.getItem("auth_token"),e=localStorage.getItem("refresh_token"),r=localStorage.getItem("auth_user"),n=localStorage.getItem("tenant_id"),i=localStorage.getItem("session_expiry");if(t&&r&&i){let o=parseInt(i);if(Date.now()<o&&!isNaN(o)){let i=JSON.parse(r);this.isValidUser(i)?(this.state={token:this.sanitizeString(t),refreshToken:e?this.sanitizeString(e):null,user:i,tenantId:n?this.sanitizeString(n):null,isAuthenticated:!0,mfaRequired:!1,sessionExpiry:o},s.apiClient.setToken(this.state.token),this.state.tenantId&&s.apiClient.setTenant(this.state.tenantId),this.scheduleTokenRefresh()):this.clearStorage()}else this.clearStorage()}}catch(t){console.error("Error loading from storage:",t),this.clearStorage()}}sanitizeString(t){return t.replace(/[<>"'&]/g,"")}isValidUser(t){return t&&"string"==typeof t.id&&"string"==typeof t.email}saveToStorage(){this.state.token&&this.state.user?(localStorage.setItem("auth_token",this.state.token),this.state.refreshToken&&localStorage.setItem("refresh_token",this.state.refreshToken),localStorage.setItem("auth_user",JSON.stringify(this.state.user)),this.state.tenantId&&localStorage.setItem("tenant_id",this.state.tenantId),this.state.sessionExpiry&&localStorage.setItem("session_expiry",this.state.sessionExpiry.toString())):this.clearStorage()}clearStorage(){localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("tenant_id"),localStorage.removeItem("session_expiry")}async login(t,e,r){try{if(!t||!e)throw Error("Email and password are required");let n=await s.apiClient.login({email:t,password:e,mfaCode:r});if(!n)throw Error("Invalid response from server");if(n.mfaRequired)return this.state={...this.state,mfaRequired:!0,user:n.user},this.notify(),n;if(!n.access_token||!n.user)throw Error("Invalid authentication response");let i=Date.now()+1e3*n.expires_in;return this.state={user:n.user,token:n.access_token,refreshToken:n.refresh_token,tenantId:n.tenant_id,isAuthenticated:!0,mfaRequired:!1,sessionExpiry:i},s.apiClient.setToken(n.access_token),n.tenant_id&&s.apiClient.setTenant(n.tenant_id),this.saveToStorage(),this.scheduleTokenRefresh(),this.notify(),n}catch(t){throw console.error("Login error:",t),this.state={...this.state,mfaRequired:!1,isAuthenticated:!1},this.notify(),t instanceof Error?t:Error("Login failed")}}async logout(){if(this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),this.state.refreshToken)try{await s.apiClient.logout(this.state.refreshToken)}catch(t){console.warn("Logout error:",t)}this.state={user:null,token:null,refreshToken:null,tenantId:null,isAuthenticated:!1,mfaRequired:!1,sessionExpiry:null},this.saveToStorage(),this.notify()}scheduleTokenRefresh(){if(!this.state.sessionExpiry)return;let t=this.state.sessionExpiry-Date.now()-3e5;t>0&&(this.refreshTimer=setTimeout(()=>{this.refreshToken()},t))}async refreshToken(){if(this.state.refreshToken)try{let t=await s.apiClient.refreshToken(this.state.refreshToken),e=Date.now()+1e3*t.expires_in;this.state={...this.state,token:t.access_token,refreshToken:t.refresh_token||this.state.refreshToken,sessionExpiry:e},s.apiClient.setToken(t.access_token),this.saveToStorage(),this.scheduleTokenRefresh(),this.notify()}catch(t){console.error("Token refresh failed:",t),this.logout()}}async enableMFA(){return await s.apiClient.enableMFA()}async verifyMFA(t){let e=await s.apiClient.verifyMFA(t);return e.success&&this.state.user&&(this.state.user.mfaEnabled=!0,this.saveToStorage(),this.notify()),e}async disableMFA(t){let e=await s.apiClient.disableMFA(t);return e.success&&this.state.user&&(this.state.user.mfaEnabled=!1,this.saveToStorage(),this.notify()),e}getState(){return this.state}constructor(){this.state={user:null,token:null,refreshToken:null,tenantId:null,isAuthenticated:!1,mfaRequired:!1,sessionExpiry:null},this.refreshTimer=null,this.listeners=[],this.loadFromStorage()}}let i=new n},8571:function(t){var e,r,s,n=t.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var l=[],u=!1,h=-1;function c(){u&&s&&(u=!1,s.length?l=s.concat(l):h=-1,l.length&&d())}function d(){if(!u){var t=a(c);u=!0;for(var e=l.length;e;){for(s=l,l=[];++h<e;)s&&s[h].run();h=-1,e=l.length}s=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new f(t,e)),1!==l.length||u||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},607:function(t,e,r){"use strict";function s(){for(var t,e,r=0,s="",n=arguments.length;r<n;r++)(t=arguments[r])&&(e=function t(e){var r,s,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e){if(Array.isArray(e)){var i=e.length;for(r=0;r<i;r++)e[r]&&(s=t(e[r]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s)}return n}(t))&&(s&&(s+=" "),s+=e);return s}r.d(e,{W:function(){return s}})}}]);