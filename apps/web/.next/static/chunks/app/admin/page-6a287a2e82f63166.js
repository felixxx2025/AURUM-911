(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3,565],{8603:function(e,t,s){Promise.resolve().then(s.bind(s,836))},836:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7573),n=s(9585),i=s(7565);function a(){let[e,t]=(0,n.useState)([]),s=()=>t((0,i.y)());return(0,n.useEffect)(()=>{s();let e=setInterval(s,3e3);return()=>clearInterval(e)},[]),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Logs do Cliente"}),(0,r.jsx)("button",{className:"text-xs underline",onClick:s,children:"Atualizar"})]}),(0,r.jsxs)("div",{className:"h-48 overflow-auto border rounded p-2 text-xs font-mono bg-gray-50",children:[0===e.length&&(0,r.jsx)("div",{className:"text-gray-500",children:"Sem entradas recentes."}),e.map((e,t)=>(0,r.jsxs)("div",{className:"whitespace-pre-wrap",children:[new Date(e.t).toLocaleTimeString()," [",e.level.toUpperCase(),"] ",e.msg,e.extra?" "+JSON.stringify(e.extra):""]},t))]})]})}var o=s(590),l=s(4012);function d(){var e,t,s,i,d,c,u,h,m,g,v,p,f,y,x,b;let[w,N]=(0,n.useState)(null),[j,T]=(0,n.useState)(null),[S,P]=(0,n.useState)(null),[q,O]=(0,n.useState)(!0);(0,n.useEffect)(()=>{k()},[]);let k=async()=>{try{let[e,t,s]=await Promise.all([l.apiClient.request("/api/v1/admin/health"),l.apiClient.request("/api/v1/admin/queues/status"),l.apiClient.request("/api/v1/admin/integrations/status")]);N(e),T(t),P(s)}catch(e){console.error("Error loading admin data:",e)}finally{O(!1)}},C=async()=>{try{await l.apiClient.request("/api/v1/admin/cache/clear",{method:"DELETE"}),alert("Cache limpo com sucesso!")}catch(e){alert("Erro ao limpar cache")}};return q?(0,r.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"},e))})]})}):(0,r.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Administra\xe7\xe3o"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Monitoramento e gest\xe3o do sistema"})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Status do Sistema"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat((null==w?void 0:w.status)==="healthy"?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Sistema"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:null==w?void 0:w.status})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat((null==w?void 0:null===(t=w.services)||void 0===t?void 0:null===(e=t.database)||void 0===e?void 0:e.status)==="up"?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Database"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:null==w?void 0:null===(i=w.services)||void 0===i?void 0:null===(s=i.database)||void 0===s?void 0:s.responseTime})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat((null==w?void 0:null===(c=w.services)||void 0===c?void 0:null===(d=c.redis)||void 0===d?void 0:d.status)==="up"?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Redis"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:null==w?void 0:null===(h=w.services)||void 0===h?void 0:null===(u=h.redis)||void 0===u?void 0:u.responseTime})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat((null==w?void 0:null===(g=w.services)||void 0===g?void 0:null===(m=g.queues)||void 0===m?void 0:m.status)==="up"?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Filas"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[null==w?void 0:null===(p=w.services)||void 0===p?void 0:null===(v=p.queues)||void 0===v?void 0:v.activeWorkers," workers"]})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"A\xe7\xf5es Administrativas"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(o.zx,{onClick:C,variant:"secondary",children:"Limpar Cache"}),(0,r.jsx)(o.zx,{variant:"secondary",children:"Exportar Logs"}),(0,r.jsx)(o.zx,{variant:"secondary",children:"Relat\xf3rio de Compliance"}),(0,r.jsx)(o.zx,{variant:"danger",children:"Modo Manuten\xe7\xe3o"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Uptime"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Math.floor(((null==w?void 0:null===(f=w.metrics)||void 0===f?void 0:f.uptime)||0)/3600),"h ",Math.floor(((null==w?void 0:null===(y=w.metrics)||void 0===y?void 0:y.uptime)||0)%3600/60),"m"]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Mem\xf3ria"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(((null==w?void 0:null===(b=w.metrics)||void 0===b?void 0:null===(x=b.memory)||void 0===x?void 0:x.heapUsed)||0)/1024/1024),"MB"]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Requests/min"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"1,247"})]}),(0,r.jsx)(a,{})]})]})}},590:function(e,t,s){"use strict";s.d(t,{zx:function(){return i}});var r=s(7573),n=s(607);s(9585);let i=function(e){let{className:t,variant:s="primary",size:i="md",loading:a,children:o,disabled:l,...d}=e;return(0,r.jsxs)("button",{className:(0,n.W)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-600":"primary"===s||"default"===s,"bg-gray-200 text-gray-900 hover:bg-gray-300 focus-visible:ring-gray-500 border border-gray-300":"secondary"===s||"outline"===s,"hover:bg-gray-100 focus-visible:ring-gray-500":"ghost"===s,"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-600":"danger"===s||"destructive"===s,"h-8 px-3 text-sm":"sm"===i,"h-10 px-4 text-sm":"md"===i,"h-12 px-6 text-base":"lg"===i},t),disabled:l||a,...d,children:[a&&(0,r.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]})}},4012:function(e,t,s){"use strict";s.d(t,{apiClient:function(){return i}});let r=s(8571).env.NEXT_PUBLIC_API_URL||"http://localhost:3000";class n{getSubdomain(){let e=window.location.hostname.split(".");return e.length>2?e[0]:null}setTenant(e){this.tenantId=e||null}setToken(e){this.token=e||null}uuid(){try{var e;let t=globalThis;if(null==t?void 0:null===(e=t.crypto)||void 0===e?void 0:e.randomUUID)return t.crypto.randomUUID()}catch(e){}return"id-"+Math.random().toString(16).slice(2)+Date.now().toString(16)}getHeaders(e){let t=this.uuid();this.lastCorrelationId=t;let s={"X-Correlation-Id":t};this.token&&(s.Authorization="Bearer ".concat(this.token));let r=this.getSubdomain();return r&&(s["x-subdomain"]=r),e&&(s["Idempotency-Key"]=e),s}isAbsoluteUrl(e){return/^https?:\/\//i.test(e)}buildUrl(e){return this.isAbsoluteUrl(e)?e:"".concat(this.baseURL).concat(e)}async sleep(e){return new Promise(t=>setTimeout(t,e))}async doFetch(e,t,r){var n,i,a;let o;let{pushLog:l}=await s.e(565).then(s.bind(s,7565)),d=null!==(n=null==r?void 0:r.timeoutMs)&&void 0!==n?n:1e4,c=Math.max(0,null!==(i=null==r?void 0:r.retries)&&void 0!==i?i:1),u=null!==(a=null==r?void 0:r.retryOnStatuses)&&void 0!==a?a:[429,502,503,504],h={...this.getHeaders(null==r?void 0:r.idempotencyKey),...t.headers},m=t.body;null==m||"string"!=typeof m||h["Content-Type"]||(h["Content-Type"]="application/json");for(let s=0;s<=c;s++){let r=new AbortController,n=setTimeout(()=>r.abort(),d),i=Date.now();try{let a=await fetch(e,{...t,headers:h,signal:r.signal});clearTimeout(n);let o=Date.now()-i;if(l("info","HTTP "+(t.method||"GET")+" "+e,{status:a.status,ms:o,correlationId:this.lastCorrelationId}),!a.ok){if(s<c&&u.includes(a.status)){let e=a.headers.get("retry-after"),t=Math.min(300*2**s,2e3);if(e){let s=Number(e);isNaN(s)||(t=Math.min(1e3*s,5e3))}await this.sleep(t+Math.floor(200*Math.random()));continue}let t="API Error: ".concat(a.status," ").concat(a.statusText);try{let e=await a.json();(null==e?void 0:e.message)&&(t=e.message)}catch(e){}throw l("warn",t,{status:a.status,url:e,ms:o,correlationId:this.lastCorrelationId}),Error(t)}return a}catch(u){clearTimeout(n);let r=Date.now()-i;l("error","HTTP error "+(t.method||"GET")+" "+e,{error:String((null==u?void 0:u.message)||u),ms:r,correlationId:this.lastCorrelationId}),o=u;let a=(null==u?void 0:u.name)==="AbortError",d=u instanceof TypeError||/Network error/i.test(String((null==u?void 0:u.message)||""));if(s<c&&(a||d)){await this.sleep(Math.min(300*2**s,1500));continue}throw u}}throw null!=o?o:Error("Unknown network error")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;try{let r=this.buildUrl(e),n=await this.doFetch(r,t,s),i=n.headers.get("content-type");if(i&&i.includes("application/json"))return n.json();return n.text()}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw Error("Network error: Unable to connect to server");throw e}}async requestRaw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,r=this.buildUrl(e),n=await this.doFetch(r,t,s),i=n.headers.get("content-type");return{data:i&&i.includes("application/json")?await n.json():await n.text(),response:n}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){let s="idem-"+Math.random().toString(36).slice(2);return this.request(e,{method:"POST",body:void 0!==t?JSON.stringify(t):void 0},{idempotencyKey:s})}async login(e){if(!e.email||!e.password)throw Error("Email and password are required");return this.request("/api/v1/auth/login",{method:"POST",body:JSON.stringify(e),credentials:"include"})}async logout(e){return this.request("/api/v1/auth/logout",{method:"POST",body:JSON.stringify({refreshToken:e})})}async refreshToken(e){return this.request("/api/v1/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:e})})}async enableMFA(){return this.request("/api/v1/auth/mfa/enable",{method:"POST"})}async verifyMFA(e){return this.request("/api/v1/auth/mfa/verify",{method:"POST",body:JSON.stringify({code:e})})}async disableMFA(e){return this.request("/api/v1/auth/mfa/disable",{method:"POST",body:JSON.stringify({password:e})})}async getTenantInfo(){return this.request("/api/v1/tenant/lookup")}async getPeople(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.pageSize)&&t.set("pageSize",e.pageSize.toString()),(null==e?void 0:e.filter)&&t.set("filter",e.filter),this.request("/api/v1/hr/people?".concat(t))}async getPerson(e){return this.request("/api/v1/hr/people/".concat(e))}async createPerson(e){return this.request("/api/v1/hr/people",{method:"POST",body:JSON.stringify(e)})}async updatePerson(e,t){return this.request("/api/v1/hr/people/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async runPayroll(e){return this.request("/api/v1/hr/payroll/run",{method:"POST",body:JSON.stringify(e)})}async punchTime(e){return this.request("/api/v1/hr/time/punch",{method:"POST",body:JSON.stringify(e)})}async listPartners(){return this.get("/api/v1/partners")}async createPartner(e){return this.request("/api/v1/partners",{method:"POST",body:JSON.stringify(e)})}async rotatePartnerCredentials(e){return this.request("/api/v1/partners/".concat(e,"/rotate-credentials"),{method:"POST"})}async listWebhooks(e){return this.get("/api/v1/partners/".concat(e,"/webhooks"))}async createWebhook(e,t){return this.request("/api/v1/partners/".concat(e,"/webhooks"),{method:"POST",body:JSON.stringify(t)})}async listPartnerLogs(e){return this.get("/api/v1/partners/".concat(e,"/logs"))}async replayDelivery(e,t){return this.request("/api/v1/partners/".concat(e,"/webhooks/").concat(t,"/replay"),{method:"POST"})}async listPartnerLogsPaged(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=new URLSearchParams;t.status&&s.set("status",t.status),t.q&&s.set("q",t.q),t.from&&s.set("from",t.from),t.to&&s.set("to",t.to),null!=t.limit&&s.set("limit",String(t.limit)),null!=t.offset&&s.set("offset",String(t.offset)),t.sort&&s.set("sort",t.sort);let{data:r,response:n}=await this.requestRaw("/api/v1/partners/".concat(e,"/logs?").concat(s.toString()));return{items:r,total:parseInt(n.headers.get("X-Total-Count")||"0",10),limit:parseInt(n.headers.get("X-Result-Limit")||String(t.limit||0),10)||t.limit||0,offset:parseInt(n.headers.get("X-Result-Offset")||String(t.offset||0),10)||t.offset||0}}async sandboxDatasets(){return this.get("/sandbox/datasets")}async sandboxEmitEvent(e,t){return this.request("/sandbox/events/".concat(encodeURIComponent(e)),{method:"POST",body:t?JSON.stringify(t):void 0})}async getWebhookCatalog(){return this.get("/webhooks/catalog")}constructor(e){this.tenantId=null,this.token=null,this.lastCorrelationId=null,this.baseURL=e}}let i=new n(r)},7565:function(e,t,s){"use strict";s.d(t,{pushLog:function(){return n},y:function(){return i}});let r=[];function n(e,t,s){let n={t:Date.now(),level:e,msg:t,extra:s};r.push(n),r.length>200&&r.shift()}function i(){return r.slice().reverse()}},8571:function(e){var t,s,r,n=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var l=[],d=!1,c=-1;function u(){d&&r&&(d=!1,r.length?l=r.concat(l):c=-1,l.length&&h())}function h(){if(!d){var e=o(u);d=!0;for(var t=l.length;t;){for(r=l,l=[];++c<t;)r&&r[c].run();c=-1,t=l.length}r=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new m(e,t)),1!==l.length||d||o(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},607:function(e,t,s){"use strict";function r(){for(var e,t,s=0,r="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=function e(t){var s,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(r=e(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r)}return n}(e))&&(r&&(r+=" "),r+=t);return r}s.d(t,{W:function(){return r}})}},function(e){e.O(0,[293,528,744],function(){return e(e.s=8603)}),_N_E=e.O()}]);