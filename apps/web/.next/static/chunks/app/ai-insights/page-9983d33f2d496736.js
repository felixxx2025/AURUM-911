(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{8276:function(e,t,r){Promise.resolve().then(r.bind(r,3158))},3158:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7573),s=r(9585),i=r(2041),o=r(590),a=r(6798),l=r(4012);function c(){let[e,t]=(0,s.useState)(null),[r,c]=(0,s.useState)(!0),[u,d]=(0,s.useState)("dashboard");(0,s.useEffect)(()=>{h()},[u]);let h=async()=>{c(!0);try{let e=await l.apiClient.get("/api/v1/ai/insights/".concat(u));t(e)}catch(e){console.error("Error loading insights:",e)}finally{c(!1)}};return r?(0,n.jsx)("div",{className:"p-6",children:"Carregando insights de IA..."}):(0,n.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Insights de IA"}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(o.zx,{variant:"dashboard"===u?"default":"outline",onClick:()=>d("dashboard"),children:"Dashboard"}),(0,n.jsx)(o.zx,{variant:"turnover"===u?"default":"outline",onClick:()=>d("turnover"),children:"Turnover"}),(0,n.jsx)(o.zx,{variant:"performance"===u?"default":"outline",onClick:()=>d("performance"),children:"Performance"})]})]}),"dashboard"===u&&(null==e?void 0:e.summary)&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsx)(a.ll,{children:"Risco de Turnover"})}),(0,n.jsxs)(a.aY,{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:[e.summary.turnoverRisk.toFixed(1),"%"]}),(0,n.jsx)("p",{className:"text-gray-600",children:"Funcion\xe1rios em risco"})]})]}),(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsx)(a.ll,{children:"Tend\xeancia de Performance"})}),(0,n.jsx)(a.aY,{children:(0,n.jsx)(i.C,{variant:"improving"===e.summary.performanceTrend?"default":"destructive",children:"improving"===e.summary.performanceTrend?"Melhorando":"Declinando"})})]}),(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsx)(a.ll,{children:"Ajustes Salariais"})}),(0,n.jsxs)(a.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:e.summary.salaryAdjustments}),(0,n.jsx)("p",{className:"text-gray-600",children:"Funcion\xe1rios eleg\xedveis"})]})]})]}),"dashboard"!==u&&e&&(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsxs)(a.ll,{className:"flex items-center justify-between",children:["turnover"===e.type&&"Previs\xe3o de Turnover","performance"===e.type&&"An\xe1lise de Performance",(0,n.jsxs)(i.C,{variant:"outline",children:["Confian\xe7a: ",(100*e.confidence).toFixed(0),"%"]})]})}),(0,n.jsx)(a.aY,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Fatores Considerados"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:e.factors.map((e,t)=>(0,n.jsx)(i.C,{variant:"secondary",children:e},t))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Recomenda\xe7\xf5es"}),(0,n.jsx)("ul",{className:"list-disc list-inside space-y-1",children:e.recommendations.map((e,t)=>(0,n.jsx)("li",{className:"text-gray-700",children:e},t))})]})]})})]})]})}},590:function(e,t,r){"use strict";r.d(t,{zx:function(){return i}});var n=r(7573),s=r(607);r(9585);let i=function(e){let{className:t,variant:r="primary",size:i="md",loading:o,children:a,disabled:l,...c}=e;return(0,n.jsxs)("button",{className:(0,s.W)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-600":"primary"===r||"default"===r,"bg-gray-200 text-gray-900 hover:bg-gray-300 focus-visible:ring-gray-500 border border-gray-300":"secondary"===r||"outline"===r,"hover:bg-gray-100 focus-visible:ring-gray-500":"ghost"===r,"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-600":"danger"===r||"destructive"===r,"h-8 px-3 text-sm":"sm"===i,"h-10 px-4 text-sm":"md"===i,"h-12 px-6 text-base":"lg"===i},t),disabled:l||o,...c,children:[o&&(0,n.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})}},2041:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});var n=r(7573);function s(e){let{className:t="",...r}=e;return(0,n.jsx)("span",{className:"inline-flex items-center rounded-md bg-gray-100 px-2 py-1 text-xs font-medium text-gray-700 ".concat(t),...r})}},6798:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},Zb:function(){return s},aY:function(){return o},ll:function(){return a}});var n=r(7573);function s(e){let{className:t="",...r}=e;return(0,n.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm ".concat(t),...r})}function i(e){let{className:t="",...r}=e;return(0,n.jsx)("div",{className:"p-4 border-b border-gray-100 ".concat(t),...r})}function o(e){let{className:t="",...r}=e;return(0,n.jsx)("div",{className:"p-4 ".concat(t),...r})}function a(e){let{className:t="",...r}=e;return(0,n.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900 ".concat(t),...r})}},4012:function(e,t,r){"use strict";r.d(t,{apiClient:function(){return i}});let n=r(8571).env.NEXT_PUBLIC_API_URL||"http://localhost:3000";class s{getSubdomain(){let e=window.location.hostname.split(".");return e.length>2?e[0]:null}setTenant(e){this.tenantId=e||null}setToken(e){this.token=e||null}uuid(){try{var e;let t=globalThis;if(null==t?void 0:null===(e=t.crypto)||void 0===e?void 0:e.randomUUID)return t.crypto.randomUUID()}catch(e){}return"id-"+Math.random().toString(16).slice(2)+Date.now().toString(16)}getHeaders(e){let t=this.uuid();this.lastCorrelationId=t;let r={"X-Correlation-Id":t};this.token&&(r.Authorization="Bearer ".concat(this.token));let n=this.getSubdomain();return n&&(r["x-subdomain"]=n),e&&(r["Idempotency-Key"]=e),r}isAbsoluteUrl(e){return/^https?:\/\//i.test(e)}buildUrl(e){return this.isAbsoluteUrl(e)?e:"".concat(this.baseURL).concat(e)}async sleep(e){return new Promise(t=>setTimeout(t,e))}async doFetch(e,t,n){var s,i,o;let a;let{pushLog:l}=await r.e(565).then(r.bind(r,7565)),c=null!==(s=null==n?void 0:n.timeoutMs)&&void 0!==s?s:1e4,u=Math.max(0,null!==(i=null==n?void 0:n.retries)&&void 0!==i?i:1),d=null!==(o=null==n?void 0:n.retryOnStatuses)&&void 0!==o?o:[429,502,503,504],h={...this.getHeaders(null==n?void 0:n.idempotencyKey),...t.headers},f=t.body;null==f||"string"!=typeof f||h["Content-Type"]||(h["Content-Type"]="application/json");for(let r=0;r<=u;r++){let n=new AbortController,s=setTimeout(()=>n.abort(),c),i=Date.now();try{let o=await fetch(e,{...t,headers:h,signal:n.signal});clearTimeout(s);let a=Date.now()-i;if(l("info","HTTP "+(t.method||"GET")+" "+e,{status:o.status,ms:a,correlationId:this.lastCorrelationId}),!o.ok){if(r<u&&d.includes(o.status)){let e=o.headers.get("retry-after"),t=Math.min(300*2**r,2e3);if(e){let r=Number(e);isNaN(r)||(t=Math.min(1e3*r,5e3))}await this.sleep(t+Math.floor(200*Math.random()));continue}let t="API Error: ".concat(o.status," ").concat(o.statusText);try{let e=await o.json();(null==e?void 0:e.message)&&(t=e.message)}catch(e){}throw l("warn",t,{status:o.status,url:e,ms:a,correlationId:this.lastCorrelationId}),Error(t)}return o}catch(d){clearTimeout(s);let n=Date.now()-i;l("error","HTTP error "+(t.method||"GET")+" "+e,{error:String((null==d?void 0:d.message)||d),ms:n,correlationId:this.lastCorrelationId}),a=d;let o=(null==d?void 0:d.name)==="AbortError",c=d instanceof TypeError||/Network error/i.test(String((null==d?void 0:d.message)||""));if(r<u&&(o||c)){await this.sleep(Math.min(300*2**r,1500));continue}throw d}}throw null!=a?a:Error("Unknown network error")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;try{let n=this.buildUrl(e),s=await this.doFetch(n,t,r),i=s.headers.get("content-type");if(i&&i.includes("application/json"))return s.json();return s.text()}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw Error("Network error: Unable to connect to server");throw e}}async requestRaw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=this.buildUrl(e),s=await this.doFetch(n,t,r),i=s.headers.get("content-type");return{data:i&&i.includes("application/json")?await s.json():await s.text(),response:s}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){let r="idem-"+Math.random().toString(36).slice(2);return this.request(e,{method:"POST",body:void 0!==t?JSON.stringify(t):void 0},{idempotencyKey:r})}async login(e){if(!e.email||!e.password)throw Error("Email and password are required");return this.request("/api/v1/auth/login",{method:"POST",body:JSON.stringify(e),credentials:"include"})}async logout(e){return this.request("/api/v1/auth/logout",{method:"POST",body:JSON.stringify({refreshToken:e})})}async refreshToken(e){return this.request("/api/v1/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:e})})}async enableMFA(){return this.request("/api/v1/auth/mfa/enable",{method:"POST"})}async verifyMFA(e){return this.request("/api/v1/auth/mfa/verify",{method:"POST",body:JSON.stringify({code:e})})}async disableMFA(e){return this.request("/api/v1/auth/mfa/disable",{method:"POST",body:JSON.stringify({password:e})})}async getTenantInfo(){return this.request("/api/v1/tenant/lookup")}async getPeople(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.pageSize)&&t.set("pageSize",e.pageSize.toString()),(null==e?void 0:e.filter)&&t.set("filter",e.filter),this.request("/api/v1/hr/people?".concat(t))}async getPerson(e){return this.request("/api/v1/hr/people/".concat(e))}async createPerson(e){return this.request("/api/v1/hr/people",{method:"POST",body:JSON.stringify(e)})}async updatePerson(e,t){return this.request("/api/v1/hr/people/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async runPayroll(e){return this.request("/api/v1/hr/payroll/run",{method:"POST",body:JSON.stringify(e)})}async punchTime(e){return this.request("/api/v1/hr/time/punch",{method:"POST",body:JSON.stringify(e)})}async listPartners(){return this.get("/api/v1/partners")}async createPartner(e){return this.request("/api/v1/partners",{method:"POST",body:JSON.stringify(e)})}async rotatePartnerCredentials(e){return this.request("/api/v1/partners/".concat(e,"/rotate-credentials"),{method:"POST"})}async listWebhooks(e){return this.get("/api/v1/partners/".concat(e,"/webhooks"))}async createWebhook(e,t){return this.request("/api/v1/partners/".concat(e,"/webhooks"),{method:"POST",body:JSON.stringify(t)})}async listPartnerLogs(e){return this.get("/api/v1/partners/".concat(e,"/logs"))}async replayDelivery(e,t){return this.request("/api/v1/partners/".concat(e,"/webhooks/").concat(t,"/replay"),{method:"POST"})}async listPartnerLogsPaged(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;t.status&&r.set("status",t.status),t.q&&r.set("q",t.q),t.from&&r.set("from",t.from),t.to&&r.set("to",t.to),null!=t.limit&&r.set("limit",String(t.limit)),null!=t.offset&&r.set("offset",String(t.offset)),t.sort&&r.set("sort",t.sort);let{data:n,response:s}=await this.requestRaw("/api/v1/partners/".concat(e,"/logs?").concat(r.toString()));return{items:n,total:parseInt(s.headers.get("X-Total-Count")||"0",10),limit:parseInt(s.headers.get("X-Result-Limit")||String(t.limit||0),10)||t.limit||0,offset:parseInt(s.headers.get("X-Result-Offset")||String(t.offset||0),10)||t.offset||0}}async sandboxDatasets(){return this.get("/sandbox/datasets")}async sandboxEmitEvent(e,t){return this.request("/sandbox/events/".concat(encodeURIComponent(e)),{method:"POST",body:t?JSON.stringify(t):void 0})}async getWebhookCatalog(){return this.get("/webhooks/catalog")}constructor(e){this.tenantId=null,this.token=null,this.lastCorrelationId=null,this.baseURL=e}}let i=new s(n)},8571:function(e){var t,r,n,s=e.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?l=n.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(n=l,l=[];++u<t;)n&&n[u].run();u=-1,t=l.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||c||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}},607:function(e,t,r){"use strict";function n(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,n,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(n=e(t[r]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n)}return s}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{W:function(){return n}})}},function(e){e.O(0,[293,528,744],function(){return e(e.s=8276)}),_N_E=e.O()}]);