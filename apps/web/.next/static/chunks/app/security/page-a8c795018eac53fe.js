(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[127],{5422:function(e,s,a){Promise.resolve().then(a.bind(a,4040))},4040:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(7573),n=a(9585),r=a(590),i=a(6798),l=a(8962),c=a(4012);function d(){let[e,s]=(0,n.useState)("password"),[a,d]=(0,n.useState)(""),[o,u]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[f,h]=(0,n.useState)(""),[j,v]=(0,n.useState)(!1),p=async e=>{e.preventDefault(),v(!0);try{let e=await c.apiClient.enableMFA();u((null==e?void 0:e.qrCode)||""),m((null==e?void 0:e.secret)||""),s("qr")}catch(e){console.error("MFA setup error:",e)}finally{v(!1)}},b=async e=>{e.preventDefault(),v(!0);try{await c.apiClient.verifyMFA(f),s("verify")}catch(e){console.error("MFA verification error:",e)}finally{v(!1)}};return(0,t.jsxs)(i.Zb,{className:"w-full max-w-md",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{children:"Configurar Autentica\xe7\xe3o de Dois Fatores"})}),(0,t.jsxs)(i.aY,{children:["password"===e&&(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Confirme sua senha"}),(0,t.jsx)(l.II,{type:"password",value:a,onChange:e=>d(e.target.value),required:!0})]}),(0,t.jsx)(r.zx,{type:"submit",disabled:j,className:"w-full",children:j?"Configurando...":"Continuar"})]}),"qr"===e&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Escaneie o QR Code com seu app autenticador"}),(0,t.jsx)("img",{src:o,alt:"QR Code",className:"mx-auto"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Chave manual: ",x]})]}),(0,t.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"C\xf3digo de verifica\xe7\xe3o"}),(0,t.jsx)(l.II,{type:"text",value:f,onChange:e=>h(e.target.value),placeholder:"000000",maxLength:6,required:!0})]}),(0,t.jsx)(r.zx,{type:"submit",disabled:j,className:"w-full",children:j?"Verificando...":"Verificar e Ativar"})]})]}),"verify"===e&&(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"text-green-600",children:"✓ MFA configurado com sucesso!"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Sua conta agora est\xe1 protegida com autentica\xe7\xe3o de dois fatores."})]})]})]})}var o=a(2041),u=a(298);function x(){let[e,s]=(0,n.useState)(u.E.getState().user),[a,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>u.E.subscribe(e=>{s(e.user)}),[]);let c=async()=>{let e=prompt("Digite sua senha para desativar MFA:");if(e)try{await u.E.disableMFA(e),alert("MFA desativado com sucesso")}catch(e){alert("Erro ao desativar MFA")}};return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Configura\xe7\xf5es de Seguran\xe7a"}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center justify-between",children:["Autentica\xe7\xe3o de Dois Fatores (MFA)",(0,t.jsx)(o.C,{variant:(null==e?void 0:e.mfaEnabled)?"default":"secondary",children:(null==e?void 0:e.mfaEnabled)?"Ativado":"Desativado"})]})}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Adicione uma camada extra de seguran\xe7a \xe0 sua conta."}),(null==e?void 0:e.mfaEnabled)?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-green-600",children:"✓"}),(0,t.jsx)("span",{children:"MFA est\xe1 ativo em sua conta"})]}),(0,t.jsx)(r.zx,{variant:"outline",onClick:c,children:"Desativar MFA"})]}):(0,t.jsx)("div",{children:a?(0,t.jsx)(d,{}):(0,t.jsx)(r.zx,{onClick:()=>l(!0),children:"Configurar MFA"})})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{children:"Sess\xf5es Ativas"})}),(0,t.jsx)(i.aY,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Sess\xe3o Atual"}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["\xdaltimo acesso: ",(null==e?void 0:e.lastLogin)?new Date(e.lastLogin).toLocaleString("pt-BR"):"Agora"]})]}),(0,t.jsx)(o.C,{variant:"default",children:"Ativa"})]})})]})]})}},2041:function(e,s,a){"use strict";a.d(s,{C:function(){return n}});var t=a(7573);function n(e){let{className:s="",...a}=e;return(0,t.jsx)("span",{className:"inline-flex items-center rounded-md bg-gray-100 px-2 py-1 text-xs font-medium text-gray-700 ".concat(s),...a})}},6798:function(e,s,a){"use strict";a.d(s,{Ol:function(){return r},Zb:function(){return n},aY:function(){return i},ll:function(){return l}});var t=a(7573);function n(e){let{className:s="",...a}=e;return(0,t.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm ".concat(s),...a})}function r(e){let{className:s="",...a}=e;return(0,t.jsx)("div",{className:"p-4 border-b border-gray-100 ".concat(s),...a})}function i(e){let{className:s="",...a}=e;return(0,t.jsx)("div",{className:"p-4 ".concat(s),...a})}function l(e){let{className:s="",...a}=e;return(0,t.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900 ".concat(s),...a})}}},function(e){e.O(0,[26,293,528,744],function(){return e(e.s=5422)}),_N_E=e.O()}]);