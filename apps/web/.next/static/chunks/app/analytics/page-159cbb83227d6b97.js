(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{5214:function(t,e,r){Promise.resolve().then(r.bind(r,2668))},2668:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return h}});var n=r(7573),s=r(9585),i=r(6798);function o(t){let{value:e,onValueChange:r,children:s,className:i="",...o}=t;return(0,n.jsx)("div",{className:i,"data-select-container":!0,"data-value":e,"data-has-on-change":!!r,...o,children:s})}function a(t){let{className:e="",children:r,...s}=t;return(0,n.jsx)("button",{className:"border rounded-md px-3 py-2 text-left w-full ".concat(e),...s,children:r})}function l(t){var e,r;let{placeholder:s,value:i,children:o}=t;return(0,n.jsx)("span",{children:null!==(r=null!==(e=null!=o?o:i)&&void 0!==e?e:s)&&void 0!==r?r:""})}function c(t){let{className:e="",children:r,...s}=t;return(0,n.jsx)("div",{className:"mt-2 rounded-md border bg-white shadow ".concat(e),...s,children:r})}function u(t){let{value:e,className:r="",children:s,onSelect:i,...o}=t;return(0,n.jsx)("div",{role:"option","data-value":e,className:"cursor-pointer px-3 py-2 hover:bg-gray-100 ".concat(r),onClick:()=>null==i?void 0:i(e),...o,children:s})}var d=r(4012);function h(){var t,e,r,h;let[f,m]=(0,s.useState)("7d"),[p,v]=(0,s.useState)(null),[y,g]=(0,s.useState)(!0);(0,s.useEffect)(()=>{x()},[f]);let x=async()=>{g(!0);try{let t=await d.apiClient.get("/api/v1/analytics/dashboard?period=".concat(f));v(t)}catch(t){console.error("Error loading metrics:",t)}finally{g(!1)}};return y?(0,n.jsx)("div",{className:"p-6",children:"Carregando m\xe9tricas..."}):(0,n.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Analytics"}),(0,n.jsxs)(o,{value:f,onValueChange:m,children:[(0,n.jsx)(a,{className:"w-32",children:(0,n.jsx)(l,{})}),(0,n.jsxs)(c,{children:[(0,n.jsx)(u,{value:"1d",children:"1 dia"}),(0,n.jsx)(u,{value:"7d",children:"7 dias"}),(0,n.jsx)(u,{value:"30d",children:"30 dias"})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"Atividade de Usu\xe1rios"})}),(0,n.jsxs)(i.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:(null==p?void 0:null===(t=p.userActivity)||void 0===t?void 0:t.length)||0}),(0,n.jsx)("p",{className:"text-gray-600",children:"Eventos registrados"})]})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"M\xf3dulos Ativos"})}),(0,n.jsxs)(i.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:(null==p?void 0:null===(e=p.moduleUsage)||void 0===e?void 0:e.length)||0}),(0,n.jsx)("p",{className:"text-gray-600",children:"M\xf3dulos em uso"})]})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"Taxa de Erro"})}),(0,n.jsxs)(i.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(null==p?void 0:null===(r=p.errorRates)||void 0===r?void 0:r.length)||0}),(0,n.jsx)("p",{className:"text-gray-600",children:"Erros registrados"})]})]})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"Uso por M\xf3dulo"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"space-y-4",children:null==p?void 0:null===(h=p.moduleUsage)||void 0===h?void 0:h.map((t,e)=>(0,n.jsx)("div",{className:"flex items-center justify-between p-3 border rounded",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:t.resource}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:[t._count.id," acessos"]})]})},e))})})]})]})}},6798:function(t,e,r){"use strict";r.d(e,{Ol:function(){return i},Zb:function(){return s},aY:function(){return o},ll:function(){return a}});var n=r(7573);function s(t){let{className:e="",...r}=t;return(0,n.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm ".concat(e),...r})}function i(t){let{className:e="",...r}=t;return(0,n.jsx)("div",{className:"p-4 border-b border-gray-100 ".concat(e),...r})}function o(t){let{className:e="",...r}=t;return(0,n.jsx)("div",{className:"p-4 ".concat(e),...r})}function a(t){let{className:e="",...r}=t;return(0,n.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900 ".concat(e),...r})}},4012:function(t,e,r){"use strict";r.d(e,{apiClient:function(){return i}});let n=r(8571).env.NEXT_PUBLIC_API_URL||"http://localhost:3000";class s{getSubdomain(){let t=window.location.hostname.split(".");return t.length>2?t[0]:null}setTenant(t){this.tenantId=t||null}setToken(t){this.token=t||null}uuid(){try{var t;let e=globalThis;if(null==e?void 0:null===(t=e.crypto)||void 0===t?void 0:t.randomUUID)return e.crypto.randomUUID()}catch(t){}return"id-"+Math.random().toString(16).slice(2)+Date.now().toString(16)}getHeaders(t){let e=this.uuid();this.lastCorrelationId=e;let r={"X-Correlation-Id":e};this.token&&(r.Authorization="Bearer ".concat(this.token));let n=this.getSubdomain();return n&&(r["x-subdomain"]=n),t&&(r["Idempotency-Key"]=t),r}isAbsoluteUrl(t){return/^https?:\/\//i.test(t)}buildUrl(t){return this.isAbsoluteUrl(t)?t:"".concat(this.baseURL).concat(t)}async sleep(t){return new Promise(e=>setTimeout(e,t))}async doFetch(t,e,n){var s,i,o;let a;let{pushLog:l}=await r.e(565).then(r.bind(r,7565)),c=null!==(s=null==n?void 0:n.timeoutMs)&&void 0!==s?s:1e4,u=Math.max(0,null!==(i=null==n?void 0:n.retries)&&void 0!==i?i:1),d=null!==(o=null==n?void 0:n.retryOnStatuses)&&void 0!==o?o:[429,502,503,504],h={...this.getHeaders(null==n?void 0:n.idempotencyKey),...e.headers},f=e.body;null==f||"string"!=typeof f||h["Content-Type"]||(h["Content-Type"]="application/json");for(let r=0;r<=u;r++){let n=new AbortController,s=setTimeout(()=>n.abort(),c),i=Date.now();try{let o=await fetch(t,{...e,headers:h,signal:n.signal});clearTimeout(s);let a=Date.now()-i;if(l("info","HTTP "+(e.method||"GET")+" "+t,{status:o.status,ms:a,correlationId:this.lastCorrelationId}),!o.ok){if(r<u&&d.includes(o.status)){let t=o.headers.get("retry-after"),e=Math.min(300*2**r,2e3);if(t){let r=Number(t);isNaN(r)||(e=Math.min(1e3*r,5e3))}await this.sleep(e+Math.floor(200*Math.random()));continue}let e="API Error: ".concat(o.status," ").concat(o.statusText);try{let t=await o.json();(null==t?void 0:t.message)&&(e=t.message)}catch(t){}throw l("warn",e,{status:o.status,url:t,ms:a,correlationId:this.lastCorrelationId}),Error(e)}return o}catch(d){clearTimeout(s);let n=Date.now()-i;l("error","HTTP error "+(e.method||"GET")+" "+t,{error:String((null==d?void 0:d.message)||d),ms:n,correlationId:this.lastCorrelationId}),a=d;let o=(null==d?void 0:d.name)==="AbortError",c=d instanceof TypeError||/Network error/i.test(String((null==d?void 0:d.message)||""));if(r<u&&(o||c)){await this.sleep(Math.min(300*2**r,1500));continue}throw d}}throw null!=a?a:Error("Unknown network error")}async request(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;try{let n=this.buildUrl(t),s=await this.doFetch(n,e,r),i=s.headers.get("content-type");if(i&&i.includes("application/json"))return s.json();return s.text()}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error("Network error: Unable to connect to server");throw t}}async requestRaw(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=this.buildUrl(t),s=await this.doFetch(n,e,r),i=s.headers.get("content-type");return{data:i&&i.includes("application/json")?await s.json():await s.text(),response:s}}async get(t){return this.request(t,{method:"GET"})}async post(t,e){let r="idem-"+Math.random().toString(36).slice(2);return this.request(t,{method:"POST",body:void 0!==e?JSON.stringify(e):void 0},{idempotencyKey:r})}async login(t){if(!t.email||!t.password)throw Error("Email and password are required");return this.request("/api/v1/auth/login",{method:"POST",body:JSON.stringify(t),credentials:"include"})}async logout(t){return this.request("/api/v1/auth/logout",{method:"POST",body:JSON.stringify({refreshToken:t})})}async refreshToken(t){return this.request("/api/v1/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:t})})}async enableMFA(){return this.request("/api/v1/auth/mfa/enable",{method:"POST"})}async verifyMFA(t){return this.request("/api/v1/auth/mfa/verify",{method:"POST",body:JSON.stringify({code:t})})}async disableMFA(t){return this.request("/api/v1/auth/mfa/disable",{method:"POST",body:JSON.stringify({password:t})})}async getTenantInfo(){return this.request("/api/v1/tenant/lookup")}async getPeople(t){let e=new URLSearchParams;return(null==t?void 0:t.page)&&e.set("page",t.page.toString()),(null==t?void 0:t.pageSize)&&e.set("pageSize",t.pageSize.toString()),(null==t?void 0:t.filter)&&e.set("filter",t.filter),this.request("/api/v1/hr/people?".concat(e))}async getPerson(t){return this.request("/api/v1/hr/people/".concat(t))}async createPerson(t){return this.request("/api/v1/hr/people",{method:"POST",body:JSON.stringify(t)})}async updatePerson(t,e){return this.request("/api/v1/hr/people/".concat(t),{method:"PUT",body:JSON.stringify(e)})}async runPayroll(t){return this.request("/api/v1/hr/payroll/run",{method:"POST",body:JSON.stringify(t)})}async punchTime(t){return this.request("/api/v1/hr/time/punch",{method:"POST",body:JSON.stringify(t)})}async listPartners(){return this.get("/api/v1/partners")}async createPartner(t){return this.request("/api/v1/partners",{method:"POST",body:JSON.stringify(t)})}async rotatePartnerCredentials(t){return this.request("/api/v1/partners/".concat(t,"/rotate-credentials"),{method:"POST"})}async listWebhooks(t){return this.get("/api/v1/partners/".concat(t,"/webhooks"))}async createWebhook(t,e){return this.request("/api/v1/partners/".concat(t,"/webhooks"),{method:"POST",body:JSON.stringify(e)})}async listPartnerLogs(t){return this.get("/api/v1/partners/".concat(t,"/logs"))}async replayDelivery(t,e){return this.request("/api/v1/partners/".concat(t,"/webhooks/").concat(e,"/replay"),{method:"POST"})}async listPartnerLogsPaged(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;e.status&&r.set("status",e.status),e.q&&r.set("q",e.q),e.from&&r.set("from",e.from),e.to&&r.set("to",e.to),null!=e.limit&&r.set("limit",String(e.limit)),null!=e.offset&&r.set("offset",String(e.offset)),e.sort&&r.set("sort",e.sort);let{data:n,response:s}=await this.requestRaw("/api/v1/partners/".concat(t,"/logs?").concat(r.toString()));return{items:n,total:parseInt(s.headers.get("X-Total-Count")||"0",10),limit:parseInt(s.headers.get("X-Result-Limit")||String(e.limit||0),10)||e.limit||0,offset:parseInt(s.headers.get("X-Result-Offset")||String(e.offset||0),10)||e.offset||0}}async sandboxDatasets(){return this.get("/sandbox/datasets")}async sandboxEmitEvent(t,e){return this.request("/sandbox/events/".concat(encodeURIComponent(t)),{method:"POST",body:e?JSON.stringify(e):void 0})}async getWebhookCatalog(){return this.get("/webhooks/catalog")}constructor(t){this.tenantId=null,this.token=null,this.lastCorrelationId=null,this.baseURL=t}}let i=new s(n)},8571:function(t){var e,r,n,s=t.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var l=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?l=n.concat(l):u=-1,l.length&&h())}function h(){if(!c){var t=a(d);c=!0;for(var e=l.length;e;){for(n=l,l=[];++u<e;)n&&n[u].run();u=-1,e=l.length}n=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}s.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new f(t,e)),1!==l.length||c||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(t){return[]},s.binding=function(t){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},function(t){t.O(0,[293,528,744],function(){return t(t.s=5214)}),_N_E=t.O()}]);